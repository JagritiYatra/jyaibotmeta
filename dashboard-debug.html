<!DOCTYPE html>
<html>
<head>
    <title>Dashboard Debug</title>
    <style>
        body { 
            font-family: monospace; 
            padding: 20px; 
            background: #0A0E27; 
            color: #00D9FF; 
        }
        .status { 
            padding: 10px; 
            margin: 10px 0; 
            border: 1px solid #00D9FF; 
            border-radius: 5px; 
        }
        .error { 
            color: #FF0066; 
            border-color: #FF0066; 
        }
        .success { 
            color: #00FF88; 
            border-color: #00FF88; 
        }
        iframe { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #00D9FF; 
            margin-top: 20px; 
        }
        button {
            background: #00D9FF;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
        }
        button:hover { background: #00B8CC; }
    </style>
</head>
<body>
    <h1>üîç Dashboard Debug Tool</h1>
    
    <div id="status" class="status">Checking dashboard...</div>
    
    <button onclick="checkAPI()">Check API</button>
    <button onclick="loadDashboard()">Load Dashboard</button>
    <button onclick="checkConsole()">Check Console</button>
    
    <div id="api-status" class="status" style="display:none;"></div>
    
    <iframe id="dashboard" src="about:blank" style="display:none;"></iframe>
    
    <div id="console-output" class="status" style="display:none; max-height: 300px; overflow-y: auto;"></div>
    
    <script>
        async function checkAPI() {
            const statusEl = document.getElementById('api-status');
            statusEl.style.display = 'block';
            statusEl.innerHTML = 'Checking API endpoints...<br><br>';
            
            const endpoints = [
                '/api/admin/analytics/realtime',
                '/api/admin/analytics/user-growth?timeframe=7d',
                '/admin/',
                '/admin/static/js/main.1ea2e9a6.js'
            ];
            
            for (const endpoint of endpoints) {
                try {
                    const response = await fetch('http://localhost:3000' + endpoint, {
                        method: endpoint.includes('.js') ? 'HEAD' : 'GET'
                    });
                    
                    if (response.ok) {
                        statusEl.innerHTML += `‚úÖ ${endpoint} - OK (${response.status})<br>`;
                    } else {
                        statusEl.innerHTML += `‚ùå ${endpoint} - Error (${response.status})<br>`;
                    }
                } catch (error) {
                    statusEl.innerHTML += `‚ùå ${endpoint} - ${error.message}<br>`;
                }
            }
        }
        
        function loadDashboard() {
            const iframe = document.getElementById('dashboard');
            iframe.style.display = 'block';
            iframe.src = 'http://localhost:3000/admin/';
            
            // Try to capture console messages from iframe
            iframe.onload = function() {
                try {
                    const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                    const status = document.getElementById('status');
                    
                    if (iframeDoc.body.innerHTML.trim() === '' || iframeDoc.body.children.length === 0) {
                        status.className = 'status error';
                        status.innerHTML = '‚ùå Dashboard loaded but appears blank';
                    } else {
                        status.className = 'status success';
                        status.innerHTML = '‚úÖ Dashboard loaded with content';
                    }
                } catch (e) {
                    console.log('Cannot access iframe content due to CORS');
                }
            };
        }
        
        function checkConsole() {
            const output = document.getElementById('console-output');
            output.style.display = 'block';
            output.innerHTML = '<h3>Console Output:</h3>';
            
            // Override console methods to capture output
            const originalLog = console.log;
            const originalError = console.error;
            
            console.log = function(...args) {
                output.innerHTML += `<div style="color: #00D9FF">LOG: ${args.join(' ')}</div>`;
                originalLog.apply(console, args);
            };
            
            console.error = function(...args) {
                output.innerHTML += `<div style="color: #FF0066">ERROR: ${args.join(' ')}</div>`;
                originalError.apply(console, args);
            };
            
            // Load dashboard in hidden iframe to capture errors
            const testFrame = document.createElement('iframe');
            testFrame.src = 'http://localhost:3000/admin/';
            testFrame.style.display = 'none';
            document.body.appendChild(testFrame);
        }
        
        // Initial check
        checkAPI();
    </script>
</body>
</html>